<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Analytics Do not Remove-->
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-WTLWZMT5');</script>
    <!-- End Google Tag Manager -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PQQ5LXLKWJ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-PQQ5LXLKWJ');
    </script>
    <!-- Primary Meta Tags -->
    <title>PDFSmaller - Advanced PDF Compression with Optional Server Processing</title>
    <meta name="title" content="PDFSmaller - Compress PDF Files with Client or Server Processing">
    <meta name="description"
        content="Reduce PDF file size with privacy-first client-side compression or optional server processing for maximum compression. 100% free and secure.">
    <meta name="keywords"
        content="compress pdf, reduce pdf size, pdf compressor, shrink pdf, pdf tool, privacy pdf compression, server pdf compression">
    <meta name="author" content="PDFSmaller">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pdfsmaller.site/">
    <meta property="og:title" content="PDFSmaller - Advanced PDF Compression with Optional Server Processing">
    <meta property="og:description"
        content="Choose between privacy-first client-side compression or optional server processing for maximum PDF compression. 100% free and secure.">
    <meta property="og:image"
        content="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%23667eea'/%3E%3Cstop offset='100%25' stop-color='%23764ba2'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='1200' height='630' fill='url(%23grad)'/%3E%3Crect x='400' y='180' width='400' height='240' rx='15' fill='rgba(255,255,255,0.9)'/%3E%3Crect x='435' y='225' width='330' height='30' rx='5' fill='%233182ce'/%3E%3Crect x='435' y='275' width='330' height='30' rx='5' fill='%233182ce'/%3E%3Crect x='435' y='325' width='330' height='30' rx='5' fill='%233182ce'/%3E%3Ccircle cx='700' cy='210' r='15' fill='%23e53e3e'/%3E%3Cpath d='M690 210 l5 -5 10 10' stroke='white' stroke-width='3' fill='none'/%3E%3Ctext x='600' y='120' font-family='Arial, sans-serif' font-size='40' font-weight='bold' text-anchor='middle' fill='white'%3EPDFSmaller%3C/text%3E%3Ctext x='600' y='170' font-family='Arial, sans-serif' font-size='30' text-anchor='middle' fill='white'%3EAdvanced PDF Compression%3C/text%3E%3Ctext x='600' y='220' font-family='Arial, sans-serif' font-size='24' text-anchor='middle' fill='white'%3EClient-Side • Optional Server Processing%3C/text%3E%3Ctext x='600' y='550' font-family='Arial, sans-serif' font-size='24' text-anchor='middle' fill='white'%3E100%25 Free • Privacy Focused%3C/text%3E%3C/svg%3E">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://pdfsmaller.site/">
    <meta property="twitter:title" content="PDFSmaller - Advanced PDF Compression with Optional Server Processing">
    <meta property="twitter:description"
        content="Choose between privacy-first client-side compression or optional server processing for maximum PDF compression. 100% free and secure.">
    <meta property="twitter:image"
        content="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%23667eea'/%3E%3Cstop offset='100%25' stop-color='%23764ba2'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='1200' height='630' fill='url(%23grad)'/%3E%3Crect x='400' y='180' width='400' height='240' rx='15' fill='rgba(255,255,255,0.9)'/%3E%3Crect x='435' y='225' width='330' height='30' rx='5' fill='%233182ce'/%3E%3Crect x='435' y='275' width='330' height='30' rx='5' fill='%233182ce'/%3E%3Crect x='435' y='325' width='330' height='30' rx='5' fill='%233182ce'/%3E%3Ccircle cx='700' cy='210' r='15' fill='%23e53e3e'/%3E%3Cpath d='M690 210 l5 -5 10 10' stroke='white' stroke-width='3' fill='none'/%3E%3Ctext x='600' y='120' font-family='Arial, sans-serif' font-size='40' font-weight='bold' text-anchor='middle' fill='white'%3EPDFSmaller%3C/text%3E%3Ctext x='600' y='170' font-family='Arial, sans-serif' font-size='30' text-anchor='middle' fill='white'%3EAdvanced PDF Compression%3C/text%3E%3Ctext x='600' y='220' font-family='Arial, sans-serif' font-size='24' text-anchor='middle' fill='white'%3EClient-Side • Optional Server Processing%3C/text%3E%3Ctext x='600' y='550' font-family='Arial, sans-serif' font-size='24' text-anchor='middle' fill='white'%3E100%25 Free • Privacy Focused%3C/text%3E%3C/svg%3E">

    <!-- Google Search Console Intergration-->
    <meta name="google-site-verification" content="ylrJvKlQR-zxl56H7ovlzVGo_9vC941cbgl02yrSbwQ" />
    <!-- Canonical URL -->
    <link rel="canonical" href="https://pdfsmaller.site/">

    <!-- Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%233182ce'/%3E%3Crect x='35' y='40' width='30' height='20' rx='2' fill='white'/%3E%3Cpath d='M40 45H60V50H40z M40 55H60V60H40z' fill='%233182ce'/%3E%3Ccircle cx='65' cy='40' r='4' fill='%23e53e3e'/%3E%3Cpath d='M62 40L65 37L68 40' stroke='white' stroke-width='1.5' fill='none'/%3E%3C/svg%3E">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "PDFSmaller",
  "url": "https://pdfsmaller.site/",
  "description": "Reduce PDF file size with privacy-first client-side compression or optional server processing for maximum compression. 100% free and secure.",
  "applicationCategory": "UtilityApplication",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "features": ["Client-side processing", "Optional server processing", "No file uploads", "Privacy-focused"]
}
</script>

    <!-- Javscript PDF Compression Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/compressorjs@1.1.1/dist/compressor.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #3182ce;
            --primary-dark: #2c5282;
            --secondary: #e53e3e;
            --success: #38a169;
            --warning: #d69e2e;
            --premium: #9f7aea;
            --premium-dark: #805ad5;
            --gray-50: #f9fafb;
            --gray-100: #f7fafc;
            --gray-200: #edf2f7;
            --gray-300: #e2e8f0;
            --gray-400: #cbd5e0;
            --gray-500: #a0aec0;
            --gray-600: #718096;
            --gray-700: #4a5568;
            --gray-800: #2d3748;
            --gray-900: #1a202c;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--gray-800);
            min-height: 100vh;
            line-height: 1.6;
            padding-top: 70px;
            /* Account for fixed navbar height */
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 40px;
            height: 40px;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-menu {
            position: relative;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .user-avatar:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--gray-200);
            min-width: 200px;
            z-index: 1000;
            transform: translateY(10px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
        }

        .user-dropdown.show {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }

        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-bottom: 1px solid var(--gray-100);
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: var(--gray-50);
        }

        .plan-badge {
            background: var(--premium);
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 12px;
            margin-left: 8px;
        }

        /* Navigation Bar Styles */
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-lg);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1002;
            /* Higher than nav-menu to ensure navbar stays on top */
            transition: all 0.3s ease;
        }

        .navbar-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: inherit;
            transition: all 0.2s ease;
            border-radius: 8px;
            padding: 4px 8px;
            margin: -4px -8px;
        }

        .navbar-brand:hover {
            background: rgba(49, 130, 206, 0.05);
            transform: translateY(-1px);
        }

        .navbar-logo {
            width: 40px;
            height: 40px;
            flex-shrink: 0;
            transition: transform 0.2s ease;
        }

        .navbar-brand:hover .navbar-logo {
            transform: scale(1.05);
        }

        .navbar-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .navbar-brand:hover .navbar-title {
            color: var(--primary-dark);
        }

        .hamburger-menu {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 48px;
            height: 48px;
            background: none;
            border: none;
            cursor: pointer;
            padding: 10px;
            border-radius: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            /* Ensure proper touch target size for mobile */
            min-width: 44px;
            min-height: 44px;
            -webkit-tap-highlight-color: transparent;
        }

        .hamburger-menu:hover {
            background: rgba(49, 130, 206, 0.12);
            transform: scale(1.05);
        }

        .hamburger-menu:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.25);
        }

        .hamburger-menu:active {
            background: rgba(49, 130, 206, 0.18);
            transform: scale(0.98);
        }

        .hamburger-line {
            width: 26px;
            height: 3px;
            background: var(--gray-700);
            border-radius: 2px;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center;
            display: block;
        }

        .hamburger-line:not(:last-child) {
            margin-bottom: 5px;
        }

        /* Enhanced hamburger animation states */
        .hamburger-menu.active {
            background: rgba(49, 130, 206, 0.15);
        }

        .hamburger-menu.active .hamburger-line {
            background: var(--primary);
        }

        .hamburger-menu.active .hamburger-line:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }

        .hamburger-menu.active .hamburger-line:nth-child(2) {
            opacity: 0;
            transform: scaleX(0);
        }

        .hamburger-menu.active .hamburger-line:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }

        /* Hover state for active hamburger */
        .hamburger-menu.active:hover {
            background: rgba(49, 130, 206, 0.2);
            transform: scale(1.05);
        }

        .hamburger-menu.active:hover .hamburger-line {
            background: var(--primary-dark);
        }

        /* Enhanced touch interactions for mobile devices */
        @media (hover: none) and (pointer: coarse) {
            .hamburger-menu:hover {
                background: none;
                transform: none;
            }

            .hamburger-menu:active {
                background: rgba(49, 130, 206, 0.2);
                transform: scale(0.95);
            }

            .hamburger-menu.active:hover {
                background: rgba(49, 130, 206, 0.15);
                transform: none;
            }

            /* Optimize touch performance */
            .hamburger-menu,
            .nav-menu-link,
            .nav-menu-overlay {
                -webkit-tap-highlight-color: transparent;
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                user-select: none;
            }

            /* Improve touch responsiveness */
            .nav-menu-link {
                touch-action: manipulation;
            }

            .nav-menu-overlay {
                touch-action: none;
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .hamburger-line {
                background: var(--gray-900);
                height: 4px;
            }

            .hamburger-menu:focus {
                box-shadow: 0 0 0 3px var(--gray-900);
            }

            .hamburger-menu.active .hamburger-line {
                background: var(--gray-900);
            }
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {

            .hamburger-menu,
            .hamburger-line {
                transition: none;
            }

            .hamburger-menu:hover {
                transform: none;
            }

            .hamburger-menu:active {
                transform: none;
            }
        }

        /* Navigation Menu Panel Styles */
        .nav-menu {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1001;
            /* Higher than modals (1000) to ensure menu appears above them */
            visibility: hidden;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-menu.show {
            visibility: visible;
            opacity: 1;
        }

        .nav-menu-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            transition: all 0.3s ease;
        }

        .nav-menu-content {
            position: absolute;
            top: 0;
            right: 0;
            height: 100vh;
            width: 320px;
            max-width: 85vw;
            background: white;
            box-shadow: var(--shadow-xl);
            transform: translateX(100%);
            transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            padding-top: 80px;
            /* Account for navbar height */
        }

        .nav-menu.show .nav-menu-content {
            transform: translateX(0);
        }

        .nav-menu-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .nav-menu-item {
            border-bottom: 1px solid var(--gray-100);
        }

        .nav-menu-item:last-child {
            border-bottom: none;
        }

        .nav-menu-link {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px 24px;
            color: var(--gray-700);
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            transition: all 0.2s ease;
            border-left: 4px solid transparent;
        }

        .nav-menu-link:hover {
            background: var(--gray-50);
            color: var(--primary);
            border-left-color: var(--primary);
            transform: translateX(4px);
        }

        .nav-menu-link:active {
            background: var(--gray-100);
            transform: translateX(2px);
        }

        .nav-menu-link.active {
            background: rgba(49, 130, 206, 0.08);
            color: var(--primary);
            border-left-color: var(--primary);
            font-weight: 600;
        }

        .nav-menu-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }

        .nav-menu-link:hover .nav-menu-icon {
            transform: scale(1.1);
        }

        .nav-menu-divider {
            height: 1px;
            background: var(--gray-200);
            margin: 12px 24px;
        }

        /* Authentication section styling */
        .auth-section {
            background: var(--gray-50);
            border-top: 2px solid var(--gray-200);
        }

        .auth-options {
            padding: 16px 0;
        }

        .premium-link {
            background: linear-gradient(135deg, rgba(159, 122, 234, 0.1), rgba(128, 90, 213, 0.1));
            border-left-color: var(--premium) !important;
        }

        .premium-link:hover {
            background: linear-gradient(135deg, rgba(159, 122, 234, 0.15), rgba(128, 90, 213, 0.15));
            color: var(--premium);
            border-left-color: var(--premium) !important;
        }

        .logout-link:hover {
            background: rgba(229, 62, 62, 0.05);
            color: var(--secondary);
            border-left-color: var(--secondary);
        }

        /* User info display in menu */
        .user-info-menu {
            padding: 20px 24px;
            background: var(--gray-50);
            border-bottom: 2px solid var(--gray-200);
        }

        .user-info-menu .user-name {
            font-weight: 600;
            color: var(--gray-800);
            margin-bottom: 4px;
        }

        .user-info-menu .user-plan {
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        .user-info-menu .plan-badge {
            display: inline-block;
            margin-left: 8px;
        }

        /* User info section in navigation menu */
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 20px 24px;
            background: var(--gray-50);
            border-bottom: 2px solid var(--gray-200);
        }

        .user-avatar-nav {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .user-details {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .user-details .user-name {
            font-weight: 600;
            color: var(--gray-800);
            font-size: 1rem;
        }

        .user-details .user-plan {
            font-size: 0.875rem;
            color: var(--gray-600);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .user-details .plan-badge {
            background: var(--premium);
            color: white;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 8px;
            text-transform: uppercase;
        }

        /* Mobile-specific menu styles */
        @media (max-width: 768px) {
            .nav-menu-content {
                width: 100vw;
                max-width: 100vw;
                padding-top: 70px;
                /* Optimize for mobile scrolling */
                -webkit-overflow-scrolling: touch;
                overscroll-behavior: contain;
            }

            .nav-menu-link {
                padding: 24px;
                font-size: 1.1rem;
                min-height: 60px;
                /* Ensure proper touch targets */
                position: relative;
                -webkit-tap-highlight-color: transparent;
                user-select: none;
                -webkit-user-select: none;
            }

            .nav-menu-icon {
                width: 28px;
                height: 28px;
            }

            .nav-menu-divider {
                margin: 16px 24px;
                height: 2px;
            }

            /* Optimize menu overlay for mobile */
            .nav-menu-overlay {
                -webkit-tap-highlight-color: transparent;
                touch-action: none;
            }

            /* Improve menu content performance on mobile */
            .nav-menu-content {
                will-change: transform;
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
            }
        }

        /* Tablet-specific adjustments */
        @media (min-width: 769px) and (max-width: 1024px) {
            .nav-menu-content {
                width: 280px;
            }
        }

        /* Desktop-specific menu styles */
        @media (min-width: 1025px) {
            .nav-menu-content {
                width: 320px;
            }

            .nav-menu-link {
                padding: 18px 24px;
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .nav-menu-content {
                border-left: 3px solid var(--gray-900);
            }

            .nav-menu-link {
                border-left-width: 6px;
            }

            .nav-menu-divider {
                background: var(--gray-900);
                height: 2px;
            }
        }

        /* Reduced motion support for menu animations */
        @media (prefers-reduced-motion: reduce) {

            .nav-menu,
            .nav-menu-content,
            .nav-menu-overlay {
                transition: none;
            }

            .nav-menu-link:hover {
                transform: none;
            }

            .nav-menu-link:active {
                transform: none;
            }

            .nav-menu-icon {
                transition: none;
            }

            .nav-menu-link:hover .nav-menu-icon {
                transform: none;
            }
        }

        /* Screen reader only content */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Integration fixes for existing functionality */

        /* Ensure modals appear above navigation menu when both are open */
        .modal-overlay.show {
            z-index: 1003;
            /* Higher than navigation menu */
        }

        /* Ensure user dropdown appears above navigation elements */
        .user-dropdown {
            z-index: 1004;
            /* Highest priority for user interactions */
        }

        /* Ensure notifications appear above navigation */
        .notification {
            z-index: 1005;
            /* Highest priority for important messages */
        }

        /* Focus management for accessibility */
        .nav-menu-link:focus {
            outline: none;
            background: rgba(49, 130, 206, 0.1);
            border-left-color: var(--primary);
            box-shadow: inset 0 0 0 2px var(--primary);
        }

        /* Enhanced focus styles for keyboard navigation */
        .nav-menu-link:focus-visible {
            outline: 3px solid var(--primary);
            outline-offset: 2px;
        }



        /* Focus trap styles */
        .nav-menu.focus-trapped .nav-menu-link[tabindex="0"] {
            background: rgba(49, 130, 206, 0.05);
        }

        /* Touch-specific interactions */
        @media (hover: none) and (pointer: coarse) {
            .nav-menu-link:hover {
                background: none;
                color: var(--gray-700);
                border-left-color: transparent;
                transform: none;
            }

            .nav-menu-link:active {
                background: var(--gray-100);
                color: var(--primary);
                border-left-color: var(--primary);
            }

            .nav-menu-link:hover .nav-menu-icon {
                transform: none;
            }
        }

        /* Touch feedback styles */
        .touch-active {
            background: var(--gray-100) !important;
            color: var(--primary) !important;
            border-left-color: var(--primary) !important;
            transform: scale(0.98) !important;
            transition: all 0.1s ease !important;
        }

        .hamburger-menu.touch-active {
            background: rgba(49, 130, 206, 0.2) !important;
            transform: scale(0.95) !important;
        }

        .hamburger-menu.touch-active .hamburger-line {
            background: var(--primary) !important;
        }

        /* Enhanced touch targets for mobile */
        @media (max-width: 768px) {
            .hamburger-menu {
                min-width: 48px;
                min-height: 48px;
                padding: 12px;
                margin: -4px;
            }

            .nav-menu-link {
                min-height: 64px;
                padding: 20px 24px;
                font-size: 1.125rem;
                line-height: 1.4;
            }

            .nav-menu-icon {
                width: 32px;
                height: 32px;
            }

            /* Improved spacing for touch */
            .nav-menu-item {
                border-bottom: 2px solid var(--gray-100);
            }

            .nav-menu-divider {
                height: 3px;
                margin: 20px 24px;
            }

            /* Touch ripple effect */
            .nav-menu-link.touch-active::before {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                width: 0;
                height: 0;
                background: rgba(49, 130, 206, 0.2);
                border-radius: 50%;
                transform: translate(-50%, -50%);
                animation: touchRipple 0.3s ease-out;
                pointer-events: none;
            }

            @keyframes touchRipple {
                to {
                    width: 200px;
                    height: 200px;
                    opacity: 0;
                }
            }
        }

        /* Body scroll prevention styles */
        body.menu-open-mobile {
            overflow: hidden !important;
            position: fixed !important;
            width: 100% !important;
            height: 100% !important;
        }

        /* Comprehensive Responsive Breakpoints */

        /* Extra Small Mobile Devices (320px - 479px) */
        @media (max-width: 479px) {
            .navbar-container {
                padding: 12px 16px;
            }

            .navbar-title {
                font-size: 1.25rem;
            }

            .navbar-logo {
                width: 32px;
                height: 32px;
            }

            .hamburger-menu {
                width: 44px;
                height: 44px;
                min-width: 44px;
                min-height: 44px;
                padding: 10px;
            }

            .hamburger-line {
                width: 22px;
                height: 2.5px;
            }

            .nav-menu-content {
                padding-top: 60px;
            }

            .nav-menu-link {
                padding: 18px 20px;
                font-size: 1rem;
                min-height: 56px;
            }

            .nav-menu-icon {
                width: 28px;
                height: 28px;
            }
        }

        /* Small Mobile Devices (480px - 767px) */
        @media (min-width: 480px) and (max-width: 767px) {
            .navbar-container {
                padding: 14px 18px;
            }

            .navbar-title {
                font-size: 1.375rem;
            }

            .navbar-logo {
                width: 36px;
                height: 36px;
            }

            .hamburger-menu {
                width: 46px;
                height: 46px;
                min-width: 46px;
                min-height: 46px;
                padding: 11px;
            }

            .hamburger-line {
                width: 24px;
                height: 2.5px;
            }

            .nav-menu-content {
                padding-top: 65px;
            }

            .nav-menu-link {
                padding: 19px 22px;
                font-size: 1.0625rem;
                min-height: 60px;
            }

            .nav-menu-icon {
                width: 30px;
                height: 30px;
            }
        }

        /* Large Mobile/Small Tablet (768px - 1024px) */
        @media (min-width: 768px) and (max-width: 1024px) {
            .navbar-container {
                padding: 15px 20px;
            }

            .hamburger-menu {
                width: 48px;
                height: 48px;
                padding: 12px;
            }

            .hamburger-line {
                width: 26px;
                height: 3px;
            }

            .nav-menu-content {
                width: 300px;
                padding-top: 70px;
            }

            .nav-menu-link {
                padding: 20px 24px;
                font-size: 1.0625rem;
                min-height: 56px;
            }

            .nav-menu-icon {
                width: 26px;
                height: 26px;
            }
        }

        /* Desktop (1025px - 1439px) */
        @media (min-width: 1025px) and (max-width: 1439px) {
            .navbar-container {
                padding: 16px 24px;
            }

            .hamburger-menu {
                width: 48px;
                height: 48px;
                padding: 12px;
            }

            .nav-menu-content {
                width: 320px;
            }

            .nav-menu-link {
                padding: 18px 24px;
                font-size: 1rem;
            }
        }

        /* Large Desktop (1440px+) */
        @media (min-width: 1440px) {
            .navbar-container {
                padding: 18px 32px;
                max-width: 1400px;
            }

            .hamburger-menu {
                width: 50px;
                height: 50px;
                padding: 13px;
            }

            .hamburger-line {
                width: 28px;
            }

            .nav-menu-content {
                width: 340px;
            }

            .nav-menu-link {
                padding: 20px 28px;
                font-size: 1.0625rem;
            }

            .nav-menu-icon {
                width: 26px;
                height: 26px;
            }
        }

        /* Cross-Device Animation Performance Optimizations */

        /* GPU acceleration for smooth animations */
        .hamburger-menu,
        .hamburger-line,
        .nav-menu,
        .nav-menu-content,
        .nav-menu-overlay {
            will-change: transform, opacity;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
        }

        /* Optimize for 60fps animations */
        @media (min-resolution: 120dpi) {
            .hamburger-line {
                transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1),
                    opacity 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .nav-menu-content {
                transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
        }

        /* Performance optimization for lower-end devices */
        @media (max-width: 768px) and (max-resolution: 150dpi) {
            .hamburger-line {
                transition: transform 0.2s ease,
                    opacity 0.2s ease;
            }

            .nav-menu-content {
                transition: transform 0.25s ease;
            }

            .nav-menu-overlay {
                backdrop-filter: none;
                background: rgba(0, 0, 0, 0.6);
            }
        }

        /* Browser Fallback Styles */

        /* Fallback for browsers without CSS Grid support */
        @supports not (display: grid) {
            .nav-menu-list {
                display: block;
            }

            .nav-menu-item {
                display: block;
                width: 100%;
            }
        }

        /* Fallback for browsers without backdrop-filter */
        @supports not (backdrop-filter: blur(10px)) {
            .navbar {
                background: rgba(255, 255, 255, 0.98);
            }

            .nav-menu-overlay {
                background: rgba(0, 0, 0, 0.7);
            }
        }

        /* Fallback for browsers without CSS transforms */
        @supports not (transform: translateX(100%)) {
            .nav-menu-content {
                right: -320px;
                transition: right 0.3s ease;
            }

            .nav-menu.show .nav-menu-content {
                right: 0;
            }
        }

        /* Fallback for browsers without CSS custom properties */
        @supports not (color: var(--primary)) {
            .navbar-title {
                color: #3182ce;
            }

            .hamburger-line {
                background: #4a5568;
            }

            .hamburger-menu.active .hamburger-line {
                background: #3182ce;
            }

            .nav-menu-link:hover {
                background: #f7fafc;
                color: #3182ce;
            }
        }

        /* Internet Explorer 11 specific fixes */
        @media screen and (-ms-high-contrast: active),
        (-ms-high-contrast: none) {
            .navbar-container {
                display: -ms-flexbox;
                -ms-flex-pack: justify;
                -ms-flex-align: center;
            }

            .navbar-brand {
                display: -ms-flexbox;
                -ms-flex-align: center;
            }

            .hamburger-menu {
                display: -ms-flexbox;
                -ms-flex-direction: column;
                -ms-flex-pack: center;
                -ms-flex-align: center;
            }

            .nav-menu-content {
                position: absolute;
                right: -320px;
            }

            .nav-menu.show .nav-menu-content {
                right: 0;
            }
        }

        /* Safari-specific optimizations */
        @supports (-webkit-appearance: none) {
            .nav-menu-content {
                -webkit-overflow-scrolling: touch;
                overscroll-behavior: contain;
            }

            .hamburger-menu {
                -webkit-tap-highlight-color: transparent;
            }
        }

        /* Firefox-specific optimizations */
        @-moz-document url-prefix() {
            .nav-menu-overlay {
                background: rgba(0, 0, 0, 0.6);
            }

            .hamburger-line {
                transition: transform 0.3s ease,
                    opacity 0.3s ease;
            }
        }

        /* Swipe indicator for mobile */
        @media (max-width: 768px) {
            .nav-menu-content::before {
                content: '';
                position: absolute;
                top: 20px;
                right: 20px;
                width: 40px;
                height: 4px;
                background: var(--gray-300);
                border-radius: 2px;
                opacity: 0.6;
            }

            .nav-menu-content::after {
                content: 'Swipe right to close';
                position: absolute;
                top: 35px;
                right: 20px;
                font-size: 0.75rem;
                color: var(--gray-500);
                opacity: 0.8;
            }
        }

        /* High contrast mode touch feedback */
        @media (prefers-contrast: high) {
            .touch-active {
                background: var(--gray-900) !important;
                color: white !important;
                border-left-color: var(--gray-900) !important;
            }

            .hamburger-menu.touch-active {
                background: var(--gray-900) !important;
            }

            .hamburger-menu.touch-active .hamburger-line {
                background: white !important;
            }
        }

        /* Reduced motion for touch interactions */
        @media (prefers-reduced-motion: reduce) {
            .touch-active {
                transform: none !important;
                transition: none !important;
            }

            .hamburger-menu.touch-active {
                transform: none !important;
            }

            @keyframes touchRipple {
                to {
                    width: 0;
                    height: 0;
                    opacity: 1;
                }
            }
        }

        /* Device-Specific Optimizations */

        /* iOS Safari optimizations */
        @supports (-webkit-touch-callout: none) {
            .nav-menu-content {
                -webkit-overflow-scrolling: touch;
                overscroll-behavior-y: contain;
            }

            /* Fix for iOS Safari viewport height issues */
            .nav-menu {
                height: 100vh;
                height: -webkit-fill-available;
            }

            .nav-menu-content {
                height: 100vh;
                height: -webkit-fill-available;
            }

            /* Prevent zoom on input focus */
            .nav-menu-link {
                font-size: max(16px, 1rem);
            }
        }

        /* Android Chrome optimizations */
        @media (max-width: 768px) {
            .nav-menu-overlay {
                /* Improve touch performance on Android */
                touch-action: none;
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                user-select: none;
            }

            .nav-menu-content {
                /* Optimize scrolling performance */
                contain: layout style paint;
                transform: translateZ(0);
            }
        }

        /* High DPI display optimizations */
        @media (-webkit-min-device-pixel-ratio: 2),
        (min-resolution: 192dpi) {
            .hamburger-line {
                /* Sharper lines on retina displays */
                transform: translateZ(0);
            }

            .nav-menu-divider {
                height: 0.5px;
                transform: scaleY(2);
            }
        }

        /* Landscape orientation optimizations */
        @media (max-height: 500px) and (orientation: landscape) {
            .nav-menu-content {
                padding-top: 50px;
                font-size: 0.9rem;
            }

            .nav-menu-link {
                padding: 12px 24px;
                min-height: 44px;
            }

            .nav-menu-icon {
                width: 20px;
                height: 20px;
            }

            .user-info {
                padding: 12px 24px;
            }
        }

        /* Print styles */
        @media print {

            .navbar,
            .nav-menu,
            .hamburger-menu {
                display: none !important;
            }

            body {
                padding-top: 0 !important;
            }
        }


        /* Forced colors mode (Windows High Contrast) */
        @media (forced-colors: active) {
            .navbar {
                background: Canvas;
                border-bottom: 1px solid CanvasText;
            }

            .navbar-title {
                color: LinkText;
            }

            .hamburger-line {
                background: ButtonText;
            }

            .hamburger-menu:focus {
                outline: 2px solid Highlight;
            }

            .nav-menu-content {
                background: Canvas;
                border: 1px solid CanvasText;
            }

            .nav-menu-link {
                color: LinkText;
            }

            .nav-menu-link:hover,
            .nav-menu-link:focus {
                background: Highlight;
                color: HighlightText;
            }
        }

        /* Performance optimizations for older devices */
        @media (max-width: 768px) and (max-device-width: 768px) {

            /* Reduce complexity for older mobile devices */
            .nav-menu-overlay {
                backdrop-filter: none;
                background: rgba(0, 0, 0, 0.7);
            }

            .navbar {
                backdrop-filter: none;
                background: rgba(255, 255, 255, 0.98);
            }

            /* Simplify animations for better performance */
            .hamburger-line {
                transition: transform 0.2s ease, opacity 0.2s ease;
            }

            .nav-menu-content {
                transition: transform 0.25s ease;
            }
        }
        /* Network-aware optimizations */
        @media (prefers-reduced-data: reduce) {
            .nav-menu-overlay {
                backdrop-filter: none;
                background: rgba(0, 0, 0, 0.8);
            }

            .navbar {
                backdrop-filter: none;
                background: rgba(255, 255, 255, 0.98);
            }
        }

        /* Main Content */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* Tab System */
        .tab-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: var(--shadow-xl);
            overflow: hidden;
        }

        .tab-nav {
            display: flex;
            background: var(--gray-100);
            border-bottom: 1px solid var(--gray-200);
        }

        .tab-button {
            flex: 1;
            padding: 16px 24px;
            background: none;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            color: var(--gray-600);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab-button:hover {
            color: var(--primary);
            background: rgba(49, 130, 206, 0.05);
        }

        .tab-button.active {
            color: var(--primary);
            background: white;
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--primary);
        }

        .tab-content {
            padding: 30px;
            min-height: 600px;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        /* Upload Areas */
        .upload-area {
            border: 3px dashed var(--gray-300);
            border-radius: 15px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 25px;
            background: var(--gray-50);
        }

        .upload-area:hover {
            border-color: var(--primary);
            background: rgba(49, 130, 206, 0.05);
        }

        .upload-area.dragover {
            border-color: var(--primary);
            background: rgba(49, 130, 206, 0.1);
            transform: scale(1.02);
        }

        .bulk-upload-area {
            border: 3px dashed var(--premium);
            border-radius: 15px;
            padding: 60px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 25px;
            background: linear-gradient(135deg, rgba(159, 122, 234, 0.05), rgba(128, 90, 213, 0.05));
            position: relative;
        }

        .bulk-upload-area::before {
            content: 'PRO';
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--premium);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
        }

        .upload-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
        }

        .upload-text {
            font-size: 1.3rem;
            color: var(--gray-800);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .upload-subtext {
            color: var(--gray-600);
            font-size: 1rem;
        }

        .file-input {
            display: none;
        }

        /* File Info */
        .file-info {
            display: none;
            align-items: center;
            gap: 15px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
        }

        .file-icon {
            width: 48px;
            height: 48px;
            flex-shrink: 0;
        }

        .file-details h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--gray-800);
            margin-bottom: 4px;
        }

        .file-details p {
            color: var(--gray-600);
            font-size: 0.9rem;
        }

        /* Bulk File List */
        .bulk-file-list {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid var(--gray-200);
            display: none;
        }

        .bulk-file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            border-bottom: 1px solid var(--gray-100);
            transition: background-color 0.2s ease;
        }

        .bulk-file-item:last-child {
            border-bottom: none;
        }

        .bulk-file-item:hover {
            background: var(--gray-50);
        }

        .remove-file-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .remove-file-btn:hover {
            background: #c53030;
            transform: translateY(-1px);
        }

        /* Compression Options */
        .compression-options {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .compression-options h3 {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--gray-800);
        }

        .option-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .option-group {
            display: flex;
            flex-direction: column;
        }

        .option-group label {
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: 8px;
        }

        .option-group select,
        .option-group input[type="range"] {
            padding: 10px;
            border: 2px solid var(--gray-300);
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.2s ease;
            background: white;
        }

        .option-group select:focus,
        .option-group input[type="range"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
        }

        .range-container {
            position: relative;
        }

        .range-value {
            position: absolute;
            top: -30px;
            right: 0;
            background: var(--primary);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .processing-mode {
            background: var(--gray-100);
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .processing-mode label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            margin-bottom: 0;
        }

        .processing-info {
            margin-top: 10px;
            font-size: 0.85rem;
            color: var(--gray-600);
            display: none;
        }

        .processing-info.show {
            display: block;
        }

        /* Buttons */
        .btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn.processing {
            animation: pulse 1.5s infinite;
        }

        .btn-premium {
            background: linear-gradient(135deg, var(--premium), var(--premium-dark));
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--gray-600), var(--gray-700));
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #2f855a);
        }

        .btn-large {
            padding: 16px 32px;
            font-size: 1.1rem;
            width: 100%;
            margin: 20px 0;
        }

        /* Progress Bars */
        .progress-container {
            margin: 25px 0;
            display: none;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--gray-700);
        }

        .progress-bar-container {
            width: 100%;
            height: 8px;
            background: var(--gray-200);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        /* Results */
        .results-container {
            display: none;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .result-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow);
            border: 1px solid var(--gray-200);
        }

        .result-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .result-label {
            color: var(--gray-600);
            font-size: 0.9rem;
        }

        /* Modals */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: white;
            border-radius: 16px;
            padding: 40px;
            max-width: 400px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.show .modal {
            transform: translateY(0);
        }

        .modal h2 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--gray-800);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--gray-700);
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--gray-300);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.2s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .modal-actions .btn {
            flex: 1;
        }

        .auth-switch {
            text-align: center;
            margin-top: 20px;
            color: var(--gray-600);
        }

        .auth-switch a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        .auth-switch a:hover {
            text-decoration: underline;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 20px;
            border-radius: 8px;
            background: white;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
            max-width: 400px;
            border-left: 4px solid var(--success);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            border-left-color: var(--secondary);
        }

        .notification.warning {
            border-left-color: var(--warning);
        }

        .notification-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .flex {
            display: flex;
        }

        .flex-column {
            flex-direction: column;
        }

        .justify-center {
            justify-content: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .align-center {
            align-items: center;
        }

        .text-center {
            text-align: center;
        }

        .gap-2 {
            gap: 8px;
        }

        .gap-3 {
            gap: 12px;
        }

        .mt-4 {
            margin-top: 16px;
        }

        .mb-4 {
            margin-bottom: 16px;
        }

        /* Animations */
        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding-top: 64px;
                /* Adjusted for smaller navbar on mobile */
            }

            .navbar-container {
                padding: 12px 16px;
            }

            .navbar-title {
                font-size: 1.3rem;
            }

            .navbar-logo {
                width: 36px;
                height: 36px;
            }

            .hamburger-menu {
                width: 46px;
                height: 46px;
                padding: 9px;
                /* Maintain minimum touch target size */
                min-width: 44px;
                min-height: 44px;
            }

            .hamburger-line {
                width: 22px;
                height: 2.5px;
            }

            .hamburger-line:not(:last-child) {
                margin-bottom: 4px;
            }

            .hamburger-menu.active .hamburger-line:nth-child(1) {
                transform: translateY(6.5px) rotate(45deg);
            }

            .hamburger-menu.active .hamburger-line:nth-child(3) {
                transform: translateY(-6.5px) rotate(-45deg);
            }

            .header-content {
                padding: 12px 16px;
            }

            .main-content {
                padding: 20px 16px;
            }

            .tab-nav {
                flex-direction: column;
            }

            .tab-content {
                padding: 20px;
            }

            .option-grid {
                grid-template-columns: 1fr;
            }

            .modal {
                padding: 30px 20px;
            }

            .modal-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            body {
                padding-top: 58px;
                /* Adjusted for smallest navbar on small mobile */
            }

            .navbar-container {
                padding: 10px 12px;
            }

            .navbar-title {
                font-size: 1.2rem;
            }

            .navbar-logo {
                width: 32px;
                height: 32px;
            }

            .hamburger-menu {
                width: 44px;
                height: 44px;
                padding: 8px;
                /* Ensure minimum touch target size is maintained even on smallest screens */
                min-width: 44px;
                min-height: 44px;
            }

            .hamburger-line {
                width: 20px;
                height: 2px;
            }

            .hamburger-line:not(:last-child) {
                margin-bottom: 3px;
            }

            .hamburger-menu.active .hamburger-line:nth-child(1) {
                transform: translateY(5px) rotate(45deg);
            }

            .hamburger-menu.active .hamburger-line:nth-child(3) {
                transform: translateY(-5px) rotate(-45deg);
            }
        }

        /* New styles for pricing section */
        .pricing-container {
            padding: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .pricing-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .pricing-header h2 {
            font-size: 2.5rem;
            color: var(--gray-800);
            margin-bottom: 16px;
        }

        .pricing-header p {
            font-size: 1.2rem;
            color: var(--gray-600);
            max-width: 600px;
            margin: 0 auto;
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .pricing-card {
            background: white;
            border-radius: 16px;
            padding: 40px 30px;
            box-shadow: var(--shadow-lg);
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid var(--gray-200);
            position: relative;
            overflow: hidden;
        }

        .pricing-card.featured {
            border-color: var(--premium);
            transform: scale(1.05);
        }

        .pricing-card.featured::before {
            content: 'MOST POPULAR';
            position: absolute;
            top: 0;
            right: 0;
            background: var(--premium);
            color: white;
            padding: 8px 16px;
            font-size: 0.75rem;
            font-weight: 700;
            border-bottom-left-radius: 8px;
        }

        .pricing-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }

        .pricing-card.featured:hover {
            transform: scale(1.05) translateY(-5px);
        }

        .plan-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gray-800);
            margin-bottom: 16px;
        }

        .plan-price {
            font-size: 3rem;
            font-weight: 800;
            color: var(--premium);
            margin-bottom: 8px;
        }

        .plan-price .currency {
            font-size: 1.5rem;
            vertical-align: super;
        }

        .plan-price .period {
            font-size: 1rem;
            font-weight: 400;
            color: var(--gray-600);
        }

        .plan-description {
            color: var(--gray-600);
            margin-bottom: 30px;
            min-height: 60px;
        }

        .plan-features {
            list-style: none;
            margin-bottom: 30px;
            text-align: left;
        }

        .plan-features li {
            padding: 10px 0;
            border-bottom: 1px solid var(--gray-100);
            display: flex;
            align-items: center;
        }

        .plan-features li:last-child {
            border-bottom: none;
        }

        .feature-icon {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            color: var(--success);
        }

        .plan-cta {
            margin-top: auto;
        }

        .current-plan-badge {
            background: var(--success);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin-top: 16px;
            display: inline-block;
        }

        .faq-section {
            margin-top: 80px;
            padding: 40px 0;
            background: var(--gray-50);
            border-radius: 16px;
        }

        .faq-title {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2rem;
            color: var(--gray-800);
        }

        .faq-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .faq-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .faq-question {
            font-weight: 700;
            color: var(--gray-800);
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        .faq-answer {
            color: var(--gray-600);
            line-height: 1.6;
        }

        /* Responsive adjustments for pricing */
        @media (max-width: 768px) {
            .pricing-grid {
                grid-template-columns: 1fr;
            }

            .pricing-card.featured {
                transform: none;
            }

            .pricing-card.featured:hover {
                transform: translateY(-5px);
            }

            .pricing-header h2 {
                font-size: 2rem;
            }

            .pricing-header p {
                font-size: 1rem;
            }
        }
    </style>
</head>

<body>
    <header class="navbar">
        <div class="navbar-container">
            <a href="#" class="navbar-brand" onclick="switchTab('single'); return false;">
                <svg class="navbar-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <rect x="20" y="25" width="60" height="50" rx="5" fill="#3182ce" />
                    <path d="M35 40H65V45H35z M35 50H65V55H35z M35 60H65V65H35z" fill="white" />
                    <circle cx="75" cy="35" r="5" fill="#e53e3e" />
                    <path d="M70 35L75 30L80 35" stroke="white" stroke-width="2" fill="none" />
                </svg>
                <span class="navbar-title">PDFSmaller.site</span>
            </a>
            <button class="hamburger-menu" aria-label="Toggle navigation menu" aria-expanded="false"
                aria-controls="nav-menu-content" aria-haspopup="true">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>
    </header>

    <nav class="nav-menu" aria-hidden="true" role="navigation" aria-label="Main navigation menu">
        <div class="nav-menu-overlay"></div>
        <div class="nav-menu-content" id="nav-menu-content" role="dialog" aria-modal="true"
            aria-labelledby="nav-menu-title">
            <h2 id="nav-menu-title" class="sr-only">Navigation Menu</h2>
            <ul class="nav-menu-list" role="menubar" aria-orientation="vertical">
                <li class="nav-menu-item" role="none">
                    <a href="#" class="nav-menu-link" data-tab="single" role="menuitem" tabindex="-1"
                        aria-describedby="single-pdf-desc">
                        <svg class="nav-menu-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                            aria-hidden="true">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                            <line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                            <line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        Single PDF
                        <span id="single-pdf-desc" class="sr-only">Compress individual PDF files</span>
                    </a>
                </li>
                <li class="nav-menu-item" role="none">
                    <a href="#" class="nav-menu-link" data-tab="bulk" role="menuitem" tabindex="-1"
                        aria-describedby="bulk-processing-desc">
                        <svg class="nav-menu-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                            aria-hidden="true">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M16 13H8M16 17H8" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                            <circle cx="18" cy="6" r="3" fill="var(--premium)" stroke="white" stroke-width="1" />
                        </svg>
                        Bulk Processing
                        <span id="bulk-processing-desc" class="sr-only">Process multiple PDF files at once</span>
                    </a>
                </li>
                <li class="nav-menu-item" role="none">
                    <a href="#" class="nav-menu-link" data-tab="pricing" role="menuitem" tabindex="-1"
                        aria-describedby="pricing-desc">
                        <svg class="nav-menu-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                            aria-hidden="true">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                            <path d="m15 9-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                            <path d="m9 9 .5-.5a3.5 3.5 0 1 1 5 5l-.5.5-.5.5a3.5 3.5 0 1 1-5-5l.5-.5"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        Pricing
                        <span id="pricing-desc" class="sr-only">View pricing plans and features</span>
                    </a>
                </li>
                <li class="nav-menu-divider" role="separator" aria-hidden="true"></li>
                <li class="nav-menu-item auth-section">
                    <div id="guestAuthSection" class="auth-options">
                        <a href="#" class="nav-menu-link auth-link" onclick="showAuthModal('login')" role="menuitem"
                            tabindex="-1" aria-describedby="sign-in-desc">
                            <svg class="nav-menu-icon" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                <polyline points="10,17 15,12 10,7" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                                <line x1="15" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            Sign In
                            <span id="sign-in-desc" class="sr-only">Sign in to your account</span>
                        </a>
                        <a href="#" class="nav-menu-link premium-link" data-tab="pricing" role="menuitem" tabindex="-1"
                            aria-describedby="get-pro-desc">
                            <svg class="nav-menu-icon" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <polygon
                                    points="12,2 15.09,8.26 22,9 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9 8.91,8.26"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                            Get Pro
                            <span id="get-pro-desc" class="sr-only">Upgrade to Pro plan for advanced features</span>
                        </a>
                    </div>
                    <div id="userAuthSection" class="user-section hidden">
                        <div class="user-info">
                            <div class="user-avatar-nav">
                                <span id="userInitialsNav">U</span>
                            </div>
                            <div class="user-details">
                                <span id="userNameNav" class="user-name">User</span>
                                <span id="userPlanNav" class="user-plan">Free Plan</span>
                            </div>
                        </div>
                        <a href="#" class="nav-menu-link" data-tab="pricing" role="menuitem" tabindex="-1"
                            aria-describedby="upgrade-plan-desc">
                            <svg class="nav-menu-icon" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <polygon
                                    points="12,2 15.09,8.26 22,9 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9 8.91,8.26"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                            Upgrade Plan
                            <span id="upgrade-plan-desc" class="sr-only">Upgrade your current plan</span>
                        </a>
                        <a href="#" class="nav-menu-link logout-link" onclick="logout()" role="menuitem" tabindex="-1"
                            aria-describedby="sign-out-desc">
                            <svg class="nav-menu-icon" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                                <polyline points="16,17 21,12 16,7" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                                <line x1="21" y1="12" x2="9" y2="12" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            Sign Out
                            <span id="sign-out-desc" class="sr-only">Sign out of your account</span>
                        </a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <main class="main-content">
        <div class="tab-container">
            <nav class="tab-nav">
                <button class="tab-button active" onclick="switchTab('single')">Single PDF</button>
                <button class="tab-button" onclick="switchTab('bulk')">Bulk Processing</button>
                <button class="tab-button" onclick="switchTab('pricing')">Pricing</button>
            </nav>

            <div class="tab-content">
                <!-- Single PDF Compression -->
                <div id="singleTab" class="tab-panel active">
                    <h2>Compress Single PDF</h2>

                    <div class="upload-area" id="singleUploadArea">
                        <svg class="upload-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="50" cy="50" r="40" fill="#4a5568" opacity="0.1" />
                            <path d="M50 35V65M35 50H65" stroke="#667eea" stroke-width="8" stroke-linecap="round" />
                            <rect x="30" y="25" width="40" height="30" rx="3" fill="#667eea" opacity="0.2" />
                            <path d="M40 35H60V40H40z M40 45H60V50H40z" fill="#667eea" />
                        </svg>
                        <div class="upload-text">Drop your PDF here or click to browse</div>
                        <div class="upload-subtext">Maximum file size: 50MB</div>
                    </div>
                    <input type="file" id="singleFileInput" class="file-input" accept=".pdf" />

                    <div id="singleFileInfo" class="file-info">
                        <svg class="file-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <rect x="25" y="25" width="50" height="50" rx="5" fill="#3182ce" />
                            <path d="M35 40H65V45H35z M35 50H65V55H35z M35 60H65V65H35z" fill="white" />
                        </svg>
                        <div class="file-details">
                            <h4 id="singleFileName"></h4>
                            <p id="singleFileSize"></p>
                        </div>
                    </div>

                    <div class="compression-options">
                        <h3>Compression Settings</h3>
                        <div class="option-grid">
                            <div class="option-group">
                                <label for="singleCompressionLevel">Compression Level:</label>
                                <select id="singleCompressionLevel">
                                    <option value="low">Low (Better Quality)</option>
                                    <option value="medium" selected>Medium (Balanced)</option>
                                    <option value="high">High (Smaller Size)</option>
                                    <option value="maximum">Maximum (Smallest Size)</option>
                                </select>
                            </div>

                            <div class="option-group">
                                <label for="singleImageQuality">Image Quality:</label>
                                <div class="range-container">
                                    <input type="range" id="singleImageQuality" min="10" max="100" value="70">
                                    <div class="range-value" id="singleQualityValue">70%</div>
                                </div>
                            </div>
                        </div>

                        <div id="processingModeContainer" class="processing-mode">
                            <label>
                                <input type="checkbox" id="useServerProcessing">
                                Use Server Processing (Pro Feature)
                            </label>
                            <div id="serverProcessingInfo" class="processing-info">
                                Advanced server-side compression with better algorithms and image optimization.
                            </div>
                        </div>
                    </div>

                    <button id="singleCompressBtn" class="btn btn-large" disabled>
                        <span>Compress PDF</span>
                    </button>

                    <div id="singleProgress" class="progress-container">
                        <div class="progress-label">
                            <span>Processing</span>
                            <span id="singleProgressPercentage">0%</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="singleProgressBar"></div>
                        </div>
                    </div>

                    <div id="singleResults" class="results-container">
                        <div class="results-grid">
                            <div class="result-card">
                                <div class="result-value" id="singleOriginalSize">0 KB</div>
                                <div class="result-label">Original Size</div>
                            </div>
                            <div class="result-card">
                                <div class="result-value" id="singleCompressedSize">0 KB</div>
                                <div class="result-label">Compressed Size</div>
                            </div>
                            <div class="result-card">
                                <div class="result-value" id="singleReductionPercent">0%</div>
                                <div class="result-label">Size Reduction</div>
                            </div>
                            <div class="result-card">
                                <div class="result-value" id="singleProcessingTime">0s</div>
                                <div class="result-label">Processing Time</div>
                            </div>
                        </div>

                        <div class="flex gap-3">
                            <button id="singleDownloadBtn" class="btn btn-success flex-1">Download Compressed
                                PDF</button>
                            <button id="singleNewFileBtn" class="btn btn-secondary flex-1">Process Another</button>
                        </div>
                    </div>
                </div>

                <!-- Bulk Processing -->
                <div id="bulkTab" class="tab-panel">
                    <h2>Bulk PDF Compression</h2>

                    <div id="bulkUpgradePrompt" class="text-center mb-4">
                        <h3 style="color: var(--premium);">Bulk Processing - Pro Feature</h3>
                        <p>Upload multiple PDFs and compress them all at once with advanced server-side processing.</p>
                        <button class="btn btn-premium mt-4" onclick="showAuthModal('register')">Upgrade to Pro</button>
                    </div>

                    <div id="bulkProcessingArea" class="hidden">
                        <div class="bulk-upload-area" id="bulkUploadArea">
                            <svg class="upload-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="50" cy="50" r="40" fill="#9f7aea" opacity="0.1" />
                                <path d="M50 35V65M35 50H65" stroke="#9f7aea" stroke-width="8" stroke-linecap="round" />
                                <rect x="25" y="20" width="35" height="25" rx="3" fill="#9f7aea" opacity="0.3" />
                                <rect x="40" y="35" width="35" height="25" rx="3" fill="#9f7aea" opacity="0.2" />
                            </svg>
                            <div class="upload-text">Drop multiple PDFs here or click to browse</div>
                            <div class="upload-subtext">Maximum 100 files, 10MB each</div>
                        </div>
                        <input type="file" id="bulkFileInput" class="file-input" accept=".pdf" multiple />

                        <div id="bulkFileList" class="bulk-file-list"></div>

                        <div class="compression-options">
                            <h3>Bulk Compression Settings</h3>
                            <div class="option-grid">
                                <div class="option-group">
                                    <label for="bulkCompressionLevel">Compression Level:</label>
                                    <select id="bulkCompressionLevel">
                                        <option value="low">Low (Better Quality)</option>
                                        <option value="medium" selected>Medium (Balanced)</option>
                                        <option value="high">High (Smaller Size)</option>
                                        <option value="maximum">Maximum (Smallest Size)</option>
                                        <option value="extreme">Extreme (Pro Only)</option>
                                    </select>
                                </div>

                                <div class="option-group">
                                    <label for="bulkImageQuality">Image Quality:</label>
                                    <div class="range-container">
                                        <input type="range" id="bulkImageQuality" min="10" max="100" value="60">
                                        <div class="range-value" id="bulkQualityValue">60%</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button id="bulkCompressBtn" class="btn btn-premium btn-large" disabled>
                            <span>Compress All Files</span>
                        </button>

                        <div id="bulkProgress" class="progress-container">
                            <div class="progress-label">
                                <span id="bulkProgressText">Processing</span>
                                <span id="bulkProgressPercentage">0%</span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" id="bulkProgressBar"></div>
                            </div>
                        </div>

                        <div id="bulkResults" class="results-container">
                            <div class="results-grid">
                                <div class="result-card">
                                    <div class="result-value" id="bulkTotalFiles">0</div>
                                    <div class="result-label">Files Processed</div>
                                </div>
                                <div class="result-card">
                                    <div class="result-value" id="bulkTotalSavings">0 MB</div>
                                    <div class="result-label">Total Space Saved</div>
                                </div>
                                <div class="result-card">
                                    <div class="result-value" id="bulkAverageReduction">0%</div>
                                    <div class="result-label">Average Reduction</div>
                                </div>
                                <div class="result-card">
                                    <div class="result-value" id="bulkTotalTime">0s</div>
                                    <div class="result-label">Total Processing Time</div>
                                </div>
                            </div>

                            <div class="flex gap-3">
                                <button id="bulkDownloadBtn" class="btn btn-success flex-1">Download All (ZIP)</button>
                                <button id="bulkNewBatchBtn" class="btn btn-secondary flex-1">Process New Batch</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Pricing Section -->
                <div id="pricingTab" class="tab-panel">
                    <div class="pricing-container">
                        <div class="pricing-header">
                            <h2>Choose Your Plan</h2>
                            <p>Select the plan that works best for your PDF compression needs. All plans include our
                                core features with additional benefits for Pro users.</p>
                        </div>

                        <div class="pricing-grid">
                            <!-- Free Plan -->
                            <div class="pricing-card">
                                <div class="plan-name">Free</div>
                                <div class="plan-price">
                                    <span class="currency">$</span>0
                                    <span class="period">/ forever</span>
                                </div>
                                <div class="plan-description">Perfect for occasional users with basic needs</div>

                                <ul class="plan-features">
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> Single file processing</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> 50MB file size limit</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> Basic compression</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> Client-side processing</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                                clip-rule="evenodd"></path>
                                        </svg> No bulk processing</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                                clip-rule="evenodd"></path>
                                        </svg> No server processing</li>
                                </ul>

                                <div class="plan-cta">
                                    <button class="btn btn-secondary" onclick="handlePlanSelection('free')"
                                        id="freePlanBtn">
                                        Current Plan
                                    </button>
                                </div>
                            </div>

                            <!-- Pro Monthly Plan -->
                            <div class="pricing-card featured">
                                <div class="plan-name">Pro Monthly</div>
                                <div class="plan-price">
                                    <span class="currency">$</span>9
                                    <span class="period">/ month</span>
                                </div>
                                <div class="plan-description">Ideal for regular users who need advanced features</div>

                                <ul class="plan-features">
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> Everything in Free</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> Bulk file processing</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> 100MB file size limit</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> Server-side processing</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> Advanced compression</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> Priority support</li>
                                </ul>

                                <div class="plan-cta">
                                    <button class="btn btn-premium" onclick="handlePlanSelection('pro_monthly')"
                                        id="proMonthlyBtn">
                                        Upgrade Now
                                    </button>
                                    <div id="proMonthlyCurrent" class="current-plan-badge hidden">Current Plan</div>
                                </div>
                            </div>

                            <!-- Pro Annual Plan -->
                            <div class="pricing-card">
                                <div class="plan-name">Pro Annual</div>
                                <div class="plan-price">
                                    <span class="currency">$</span>90
                                    <span class="period">/ year</span>
                                </div>
                                <div class="plan-description">Best value - save 17% compared to monthly billing</div>

                                <ul class="plan-features">
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> Everything in Pro Monthly</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> 17% savings</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> 200MB file size limit</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> Extreme compression level</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> Dedicated support</li>
                                    <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                clip-rule="evenodd"></path>
                                        </svg> Early access to new features</li>
                                </ul>

                                <div class="plan-cta">
                                    <button class="btn btn-premium" onclick="handlePlanSelection('pro_annual')"
                                        id="proAnnualBtn">
                                        Upgrade Now
                                    </button>
                                    <div id="proAnnualCurrent" class="current-plan-badge hidden">Current Plan</div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-section">
                            <h3 class="faq-title">Frequently Asked Questions</h3>
                            <div class="faq-grid">
                                <div class="faq-item">
                                    <div class="faq-question">Can I change my plan later?</div>
                                    <div class="faq-answer">Yes, you can upgrade or downgrade your plan at any time.
                                        When upgrading, you'll get immediate access to the new features. When
                                        downgrading, the changes will take effect at the end of your billing cycle.
                                    </div>
                                </div>
                                <div class="faq-item">
                                    <div class="faq-question">Is there a free trial?</div>
                                    <div class="faq-answer">We don't offer a free trial for our Pro plans, but you can
                                        use our Free plan indefinitely to test our basic features. All Pro plans come
                                        with a 14-day money-back guarantee.</div>
                                </div>
                                <div class="faq-item">
                                    <div class="faq-question">What payment methods do you accept?</div>
                                    <div class="faq-answer">We accept all major credit cards, PayPal, and in some
                                        regions, bank transfers. All payments are processed securely through our payment
                                        partners.</div>
                                </div>
                                <div class="faq-item">
                                    <div class="faq-question">How does the bulk processing work?</div>
                                    <div class="faq-answer">Our bulk processing allows you to upload multiple PDF files
                                        at once (up to 100 files). The system will process them sequentially and provide
                                        you with a ZIP download containing all compressed files.</div>
                                </div>
                                <div class="faq-item">
                                    <div class="faq-question">Can I cancel my subscription?</div>
                                    <div class="faq-answer">Yes, you can cancel your subscription at any time. You'll
                                        continue to have access to Pro features until the end of your billing period,
                                        after which your account will revert to the Free plan.</div>
                                </div>
                                <div class="faq-item">
                                    <div class="faq-question">Is my data secure?</div>
                                    <div class="faq-answer">Absolutely. We use industry-standard encryption for all file
                                        transfers and processing. Your files are automatically deleted from our servers
                                        after 24 hours, and we never share your data with third parties.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Auth Modal -->
    <div id="authModal" class="modal-overlay">
        <div class="modal">
            <h2 id="authModalTitle">Sign In</h2>
            <form id="authForm">
                <div class="form-group">
                    <label for="authEmail">Email</label>
                    <input type="email" id="authEmail" required>
                </div>
                <div class="form-group">
                    <label for="authPassword">Password</label>
                    <input type="password" id="authPassword" required>
                </div>
                <div id="authNameGroup" class="form-group hidden">
                    <label for="authName">Full Name</label>
                    <input type="text" id="authName">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="hideAuthModal()">Cancel</button>
                    <button type="submit" class="btn" id="authSubmitBtn">Sign In</button>
                </div>
            </form>
            <div class="auth-switch">
                <span id="authSwitchText">Don't have an account?</span>
                <a href="#" id="authSwitchLink" onclick="toggleAuthMode()">Sign up</a>
            </div>
        </div>
    </div>

    <script>
        // Application State Management
        class AppState {
            constructor() {
                this.user = null;
                this.currentTab = 'single';
                this.singleFile = null;
                this.bulkFiles = [];
                this.isProcessing = false;
                this.compressedBlob = null;
                this.bulkCompressedFiles = [];
            }

            reset() {
                this.singleFile = null;
                this.bulkFiles = [];
                this.compressedBlob = null;
                this.bulkCompressedFiles = [];
                this.isProcessing = false;
            }
        }

        // Authentication System
        class AuthenticationManager {
            constructor(appState) {
                this.appState = appState;
                this.init();
            }

            init() {
                // Check for existing user session
                const userData = localStorage.getItem('pdfsmaller_user');
                if (userData) {
                    try {
                        this.appState.user = JSON.parse(userData);
                        this.updateUI();
                    } catch (e) {
                        localStorage.removeItem('pdfsmaller_user');
                    }
                }
            }

            async login(email, password) {
                // Simulate API call with demo credentials
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        if (email === 'demo@example.com' && password === 'password') {
                            const user = {
                                id: 1,
                                name: 'Demo User',
                                email: email,
                                plan: 'Free'
                            };
                            this.setUser(user);
                            resolve(user);
                        } else if (email === 'pro@example.com' && password === 'password') {
                            const user = {
                                id: 2,
                                name: 'Pro User',
                                email: email,
                                plan: 'Pro'
                            };
                            this.setUser(user);
                            resolve(user);
                        } else {
                            reject(new Error('Invalid credentials. Try: demo@example.com / password or pro@example.com / password'));
                        }
                    }, 1000);
                });
            }

            async register(email, password, name) {
                // Simulate registration
                return new Promise((resolve) => {
                    setTimeout(() => {
                        const user = {
                            id: Date.now(),
                            name: name,
                            email: email,
                            plan: 'Free'
                        };
                        this.setUser(user);
                        resolve(user);
                    }, 1000);
                });
            }

            setUser(user) {
                this.appState.user = user;
                localStorage.setItem('pdfsmaller_user', JSON.stringify(user));
                this.updateUI();
            }

            logout() {
                this.appState.user = null;
                localStorage.removeItem('pdfsmaller_user');
                this.updateUI();
                showNotification('Signed out successfully', 'success');
            }

            updateUI() {
                const guestActions = document.getElementById('guestActions');
                const userActions = document.getElementById('userActions');
                const bulkUpgradePrompt = document.getElementById('bulkUpgradePrompt');
                const bulkProcessingArea = document.getElementById('bulkProcessingArea');
                const useServerCheckbox = document.getElementById('useServerProcessing');

                // Navigation menu authentication sections
                const guestAuthSection = document.getElementById('guestAuthSection');
                const userAuthSection = document.getElementById('userAuthSection');

                if (this.appState.user) {
                    // Update header user dropdown
                    guestActions.classList.add('hidden');
                    userActions.classList.remove('hidden');

                    document.getElementById('userInitials').textContent =
                        this.appState.user.name.charAt(0).toUpperCase();
                    document.getElementById('userName').textContent = this.appState.user.name;
                    document.getElementById('userPlan').textContent = this.appState.user.plan;

                    // Update navigation menu authentication sections
                    if (guestAuthSection && userAuthSection) {
                        guestAuthSection.style.display = 'none';
                        userAuthSection.classList.remove('hidden');
                        userAuthSection.style.display = 'block';

                        // Update navigation menu user info
                        const userInitialsNav = document.getElementById('userInitialsNav');
                        const userNameNav = document.getElementById('userNameNav');
                        const userPlanNav = document.getElementById('userPlanNav');

                        if (userInitialsNav) {
                            userInitialsNav.textContent = this.appState.user.name.charAt(0).toUpperCase();
                        }
                        if (userNameNav) {
                            userNameNav.textContent = this.appState.user.name;
                        }
                        if (userPlanNav) {
                            const planText = this.appState.user.plan.includes('Pro') ? 'Pro Plan' : 'Free Plan';
                            userPlanNav.textContent = planText;

                            // Add plan badge styling for Pro users
                            if (this.appState.user.plan.includes('Pro')) {
                                userPlanNav.innerHTML = planText + ' <span class="plan-badge">PRO</span>';
                            }
                        }
                    }

                    // Update navigation menu authentication state
                    if (window.navigationMenu) {
                        window.navigationMenu.updateAuthenticationState(this.appState.user);
                    }

                    // Enable/disable features based on plan
                    if (this.appState.user.plan === 'Pro') {
                        bulkUpgradePrompt.classList.add('hidden');
                        bulkProcessingArea.classList.remove('hidden');
                        useServerCheckbox.disabled = false;
                    } else {
                        bulkUpgradePrompt.classList.remove('hidden');
                        bulkProcessingArea.classList.add('hidden');
                        useServerCheckbox.disabled = true;
                    }
                } else {
                    // Update header user dropdown
                    guestActions.classList.remove('hidden');
                    userActions.classList.add('hidden');

                    // Update navigation menu authentication sections
                    if (guestAuthSection && userAuthSection) {
                        guestAuthSection.style.display = 'block';
                        userAuthSection.classList.add('hidden');
                        userAuthSection.style.display = 'none';
                    }

                    // Update navigation menu authentication state
                    if (window.navigationMenu) {
                        window.navigationMenu.updateAuthenticationState(null);
                    }

                    bulkUpgradePrompt.classList.remove('hidden');
                    bulkProcessingArea.classList.add('hidden');
                    useServerCheckbox.disabled = true;
                }
            }

            isPro() {
                return this.appState.user && this.appState.user.plan === 'Pro';
            }
        }

        // PDF Compression Engine
        class PDFCompressor {
            constructor(appState) {
                this.appState = appState;
            }

            async compressSingle(file, options) {
                const startTime = Date.now();

                try {
                    let compressedBlob;

                    if (options.useServer && auth.isPro()) {
                        compressedBlob = await this.compressOnServer(file, options);
                    } else {
                        compressedBlob = await this.compressClientSide(file, options);
                    }

                    const endTime = Date.now();
                    const processingTime = (endTime - startTime) / 1000;

                    return {
                        originalSize: file.size,
                        compressedSize: compressedBlob.size,
                        processingTime: processingTime,
                        blob: compressedBlob
                    };
                } catch (error) {
                    throw new Error(`Compression failed: ${error.message}`);
                }
            }

            async compressClientSide(file, options) {
                updateSingleProgress(20, 'Loading PDF...');

                const arrayBuffer = await file.arrayBuffer();
                updateSingleProgress(40, 'Processing...');

                // Load PDF with PDF-lib
                const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);
                updateSingleProgress(60, 'Compressing...');

                // Configure compression options
                const compressionOptions = this.getClientCompressionOptions(options);

                updateSingleProgress(80, 'Finalizing...');

                // Save compressed PDF
                const compressedBytes = await pdfDoc.save(compressionOptions);
                updateSingleProgress(100, 'Complete!');

                return new Blob([compressedBytes], { type: 'application/pdf' });
            }

            async compressOnServer(file, options) {
                const formData = new FormData();
                formData.append('file', file);
                formData.append('compressionLevel', options.compressionLevel);
                formData.append('imageQuality', options.imageQuality);
                formData.append('userId', this.appState.user?.id || 'anonymous');

                // Simulate server compression with better results
                return new Promise((resolve) => {
                    let progress = 20;
                    const interval = setInterval(() => {
                        progress += 15;
                        updateSingleProgress(Math.min(progress, 90), 'Server processing...');

                        if (progress >= 90) {
                            clearInterval(interval);

                            // Simulate server response with better compression
                            setTimeout(() => {
                                updateSingleProgress(100, 'Complete!');

                                // Create a more compressed version for server processing
                                const reductionFactor = this.getServerReductionFactor(options);
                                const compressedSize = Math.floor(file.size * reductionFactor);

                                // Create dummy compressed blob (in real app, this would be from server)
                                const compressedBlob = new Blob(
                                    [new ArrayBuffer(compressedSize)],
                                    { type: 'application/pdf' }
                                );

                                resolve(compressedBlob);
                            }, 500);
                        }
                    }, 300);
                });
            }

            async compressBulk(files, options) {
                if (!auth.isPro()) {
                    throw new Error('Bulk processing requires Pro subscription');
                }

                const startTime = Date.now();
                const results = [];

                updateBulkProgress(0, 'Starting bulk compression...');

                // Process files in batches for better performance
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const progress = ((i + 1) / files.length) * 100;

                    updateBulkProgress(progress, `Processing ${i + 1}/${files.length}: ${file.name}`);

                    try {
                        const result = await this.compressOnServer(file, options);
                        results.push({
                            originalName: file.name,
                            originalSize: file.size,
                            compressedSize: result.size,
                            blob: result
                        });
                    } catch (error) {
                        console.error(`Failed to compress ${file.name}:`, error);
                        // Continue with other files
                    }

                    // Small delay to prevent UI blocking
                    await new Promise(resolve => setTimeout(resolve, 100));
                }

                const endTime = Date.now();
                const totalProcessingTime = (endTime - startTime) / 1000;

                return {
                    files: results,
                    totalProcessingTime: totalProcessingTime
                };
            }

            getClientCompressionOptions(options) {
                const baseOptions = {
                    useObjectStreams: true,
                    addDefaultPage: false,
                    objectsPerTick: 50
                };

                switch (options.compressionLevel) {
                    case 'low':
                        return { ...baseOptions, useObjectStreams: false };
                    case 'medium':
                        return baseOptions;
                    case 'high':
                        return { ...baseOptions, objectsPerTick: 100 };
                    case 'maximum':
                        return { ...baseOptions, useObjectStreams: false, objectsPerTick: 200 };
                    default:
                        return baseOptions;
                }
            }

            getServerReductionFactor(options) {
                // Server processing achieves better compression ratios
                const baseReduction = {
                    'low': 0.85,
                    'medium': 0.65,
                    'high': 0.45,
                    'maximum': 0.35,
                    'extreme': 0.25
                };

                const qualityFactor = options.imageQuality / 100;
                return baseReduction[options.compressionLevel] * (0.7 + qualityFactor * 0.3);
            }
        }

        // UI Management Functions

        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');

            // Update tab panels
            document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));
            document.getElementById(`${tabName}Tab`).classList.add('active');

            appState.currentTab = tabName;

            // If switching to pricing tab, update the UI based on current plan
            if (tabName === 'pricing') {
                updatePricingUI();
            }
        }

        // Function to update pricing UI based on current user plan
        function updatePricingUI() {
            const user = appState.user;
            const freePlanBtn = document.getElementById('freePlanBtn');
            const proMonthlyBtn = document.getElementById('proMonthlyBtn');
            const proAnnualBtn = document.getElementById('proAnnualBtn');
            const proMonthlyCurrent = document.getElementById('proMonthlyCurrent');
            const proAnnualCurrent = document.getElementById('proAnnualCurrent');

            // Reset all buttons
            freePlanBtn.textContent = 'Current Plan';
            freePlanBtn.classList.remove('btn-premium');
            freePlanBtn.classList.add('btn-secondary');
            freePlanBtn.disabled = true;

            proMonthlyBtn.textContent = 'Upgrade Now';
            proMonthlyBtn.classList.remove('btn-secondary');
            proMonthlyBtn.classList.add('btn-premium');
            proMonthlyBtn.disabled = false;

            proAnnualBtn.textContent = 'Upgrade Now';
            proAnnualBtn.classList.remove('btn-secondary');
            proAnnualBtn.classList.add('btn-premium');
            proAnnualBtn.disabled = false;

            // Hide all current plan badges
            proMonthlyCurrent.classList.add('hidden');
            proAnnualCurrent.classList.add('hidden');

            // Update based on current plan
            if (user) {
                if (user.plan === 'Free') {
                    freePlanBtn.textContent = 'Current Plan';
                    freePlanBtn.disabled = true;
                } else if (user.plan === 'Pro' || user.plan === 'Pro Monthly') {
                    freePlanBtn.textContent = 'Downgrade';
                    freePlanBtn.disabled = false;
                    freePlanBtn.onclick = () => downgradeToFree();

                    proMonthlyBtn.textContent = 'Current Plan';
                    proMonthlyBtn.classList.remove('btn-premium');
                    proMonthlyBtn.classList.add('btn-secondary');
                    proMonthlyBtn.disabled = true;
                    proMonthlyCurrent.classList.remove('hidden');
                } else if (user.plan === 'Pro Annual') {
                    freePlanBtn.textContent = 'Downgrade';
                    freePlanBtn.disabled = false;
                    freePlanBtn.onclick = () => downgradeToFree();

                    proAnnualBtn.textContent = 'Current Plan';
                    proAnnualBtn.classList.remove('btn-premium');
                    proAnnualBtn.classList.add('btn-secondary');
                    proAnnualBtn.disabled = true;
                    proAnnualCurrent.classList.remove('hidden');
                }
            } else {
                // User is not logged in
                freePlanBtn.textContent = 'Get Started';
                freePlanBtn.disabled = false;
                freePlanBtn.onclick = () => showAuthModal('register');
            }
        }

        // Function to handle plan selection
        function handlePlanSelection(plan) {
            if (!appState.user) {
                // If user is not logged in, show auth modal with register form
                showAuthModal('register');
                return;
            }

            // Check if user is already on this plan
            if ((plan === 'free' && appState.user.plan === 'Free') ||
                (plan === 'pro_monthly' && (appState.user.plan === 'Pro' || appState.user.plan === 'Pro Monthly')) ||
                (plan === 'pro_annual' && appState.user.plan === 'Pro Annual')) {
                showNotification('You are already on this plan', 'info');
                return;
            }

            // Handle upgrade/downgrade
            if (plan === 'free') {
                downgradeToFree();
            } else {
                upgradeToPro(plan);
            }
        }

        // Function to upgrade to Pro plan
        async function upgradeToPro(plan) {
            try {
                showNotification('Processing your upgrade...', 'info');

                // Call backend API to create subscription
                const planId = plan === 'pro_monthly' ? 'price_monthly' : 'price_annual';
                const paymentMethod = 'card'; // In a real implementation, this would come from a payment form

                const response = await backendAPI.createSubscription(planId, paymentMethod);

                // Update user plan
                appState.user.plan = plan === 'pro_monthly' ? 'Pro Monthly' : 'Pro Annual';
                localStorage.setItem('pdfsmaller_user', JSON.stringify(appState.user));

                // Update UI
                auth.updateUI();
                updatePricingUI();

                // Update navigation menu plan info
                if (window.navigationMenu) {
                    window.navigationMenu.updateUserPlan(appState.user);
                }

                showNotification('Successfully upgraded to Pro!', 'success');
            } catch (error) {
                console.error('Upgrade failed:', error);
                showNotification('Upgrade failed: ' + error.message, 'error');
            }
        }

        // Function to downgrade to Free plan
        async function downgradeToFree() {
            try {
                showNotification('Processing your downgrade...', 'info');

                // Call backend API to cancel subscription
                await backendAPI.cancelSubscription();

                // Update user plan
                appState.user.plan = 'Free';
                localStorage.setItem('pdfsmaller_user', JSON.stringify(appState.user));

                // Update UI
                auth.updateUI();
                updatePricingUI();

                // Update navigation menu plan info
                if (window.navigationMenu) {
                    window.navigationMenu.updateUserPlan(appState.user);
                }

                showNotification('Your plan has been changed to Free. Pro features will be available until the end of your billing period.', 'success');
            } catch (error) {
                console.error('Downgrade failed:', error);
                showNotification('Downgrade failed: ' + error.message, 'error');
            }
        }


        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function updateSingleProgress(percent, text = 'Processing') {
            const progressContainer = document.getElementById('singleProgress');
            const progressBar = document.getElementById('singleProgressBar');
            const progressPercentage = document.getElementById('singleProgressPercentage');
            const progressLabel = progressContainer.querySelector('.progress-label span');

            progressContainer.style.display = 'block';
            progressBar.style.width = percent + '%';
            progressPercentage.textContent = percent + '%';
            progressLabel.textContent = text;
        }

        function updateBulkProgress(percent, text = 'Processing') {
            const progressContainer = document.getElementById('bulkProgress');
            const progressBar = document.getElementById('bulkProgressBar');
            const progressPercentage = document.getElementById('bulkProgressPercentage');
            const progressText = document.getElementById('bulkProgressText');

            progressContainer.style.display = 'block';
            progressBar.style.width = percent + '%';
            progressPercentage.textContent = Math.round(percent) + '%';
            progressText.textContent = text;
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;

            const icon = type === 'success' ? '✓' : type === 'error' ? '✗' : 'ℹ';
            notification.innerHTML = `
        <div class="notification-icon">${icon}</div>
        <span>${message}</span>
    `;

            document.body.appendChild(notification);

            setTimeout(() => notification.classList.add('show'), 10);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 4000);
        }

        // Modal Functions
        function showAuthModal(mode) {
            const modal = document.getElementById('authModal');
            const title = document.getElementById('authModalTitle');
            const submitBtn = document.getElementById('authSubmitBtn');
            const nameGroup = document.getElementById('authNameGroup');
            const switchText = document.getElementById('authSwitchText');
            const switchLink = document.getElementById('authSwitchLink');

            if (mode === 'login') {
                title.textContent = 'Sign In';
                submitBtn.textContent = 'Sign In';
                nameGroup.classList.add('hidden');
                switchText.textContent = "Don't have an account?";
                switchLink.textContent = 'Sign up';
            } else {
                title.textContent = 'Create Account';
                submitBtn.textContent = 'Create Account';
                nameGroup.classList.remove('hidden');
                switchText.textContent = "Already have an account?";
                switchLink.textContent = 'Sign in';
            }

            modal.classList.add('show');
        }

        function hideAuthModal() {
            document.getElementById('authModal').classList.remove('show');
            document.getElementById('authForm').reset();
        }

        function toggleAuthMode() {
            const title = document.getElementById('authModalTitle');
            const isLogin = title.textContent === 'Sign In';
            showAuthModal(isLogin ? 'register' : 'login');
        }

        function toggleUserDropdown() {
            document.getElementById('userDropdown').classList.toggle('show');
        }

        function logout() {
            auth.logout();
            document.getElementById('userDropdown').classList.remove('show');
            resetUI();
        }

        function upgradeAccount() {
            // Simulate account upgrade
            if (appState.user && appState.user.plan === 'Free') {
                appState.user.plan = 'Pro';
                localStorage.setItem('pdfsmaller_user', JSON.stringify(appState.user));
                auth.updateUI();

                // Update navigation menu plan info
                if (window.navigationMenu) {
                    window.navigationMenu.updateUserPlan(appState.user);
                }

                showNotification('Congratulations! You now have Pro features!', 'success');
            }
            document.getElementById('userDropdown').classList.remove('show');
        }

        function resetUI() {
            // Reset single file UI
            document.getElementById('singleFileInfo').style.display = 'none';
            document.getElementById('singleResults').style.display = 'none';
            document.getElementById('singleProgress').style.display = 'none';
            document.getElementById('singleCompressBtn').disabled = true;
            document.getElementById('singleFileInput').value = '';

            // Reset bulk UI
            document.getElementById('bulkFileList').innerHTML = '';
            document.getElementById('bulkFileList').style.display = 'none';
            document.getElementById('bulkResults').style.display = 'none';
            document.getElementById('bulkProgress').style.display = 'none';
            document.getElementById('bulkCompressBtn').disabled = true;
            document.getElementById('bulkFileInput').value = '';

            appState.reset();
        }

        // File Handling Functions
        function handleSingleFile(file) {
            if (file.type !== 'application/pdf') {
                showNotification('Please select a valid PDF file.', 'error');
                return;
            }

            if (file.size > 50 * 1024 * 1024) { // 50MB limit
                showNotification('File size must be less than 50MB.', 'error');
                return;
            }

            appState.singleFile = file;
            document.getElementById('singleFileName').textContent = file.name;
            document.getElementById('singleFileSize').textContent = formatFileSize(file.size);
            document.getElementById('singleFileInfo').style.display = 'flex';
            document.getElementById('singleCompressBtn').disabled = false;

            // Hide previous results
            document.getElementById('singleResults').style.display = 'none';
        }

        function handleBulkFiles(files) {
            if (!auth.isPro()) {
                showNotification('Please upgrade to Pro to use bulk processing', 'error');
                return;
            }

            const validFiles = Array.from(files).filter(file => {
                if (file.type !== 'application/pdf') {
                    showNotification(`Skipped ${file.name}: Not a PDF file`, 'warning');
                    return false;
                }

                if (file.size > 10 * 1024 * 1024) { // 10MB limit for bulk
                    showNotification(`Skipped ${file.name}: File exceeds 10MB limit`, 'warning');
                    return false;
                }

                return true;
            });

            // Add to existing files, avoiding duplicates
            validFiles.forEach(file => {
                const exists = appState.bulkFiles.some(f => f.name === file.name && f.size === file.size);
                if (!exists) {
                    appState.bulkFiles.push(file);
                }
            });

            updateBulkFileList();
        }

        function updateBulkFileList() {
            const fileList = document.getElementById('bulkFileList');
            fileList.innerHTML = '';

            if (appState.bulkFiles.length === 0) {
                fileList.style.display = 'none';
                document.getElementById('bulkCompressBtn').disabled = true;
                return;
            }

            fileList.style.display = 'block';
            document.getElementById('bulkCompressBtn').disabled = false;

            appState.bulkFiles.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'bulk-file-item';
                fileItem.innerHTML = `
            <div class="file-info">
                <svg class="file-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <rect x="25" y="25" width="50" height="50" rx="5" fill="#3182ce"/>
                    <path d="M35 40H65V45H35z M35 50H65V55H35z M35 60H65V65H35z" fill="white"/>
                </svg>
                <div class="file-details">
                    <h4>${file.name}</h4>
                    <p>${formatFileSize(file.size)}</p>
                </div>
            </div>
            <button class="remove-file-btn" onclick="removeBulkFile(${index})">Remove</button>
        `;
                fileList.appendChild(fileItem);
            });
        }

        function removeBulkFile(index) {
            appState.bulkFiles.splice(index, 1);
            updateBulkFileList();
        }

        // Initialize Application
        const appState = new AppState();
        const auth = new AuthenticationManager(appState);
        const compressor = new PDFCompressor(appState);

        // Event Listeners Setup
        document.addEventListener('DOMContentLoaded', function () {
            // Single file upload area
            const singleUploadArea = document.getElementById('singleUploadArea');
            const singleFileInput = document.getElementById('singleFileInput');

            singleUploadArea.addEventListener('click', () => singleFileInput.click());
            singleUploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                singleUploadArea.classList.add('dragover');
            });
            singleUploadArea.addEventListener('dragleave', () => {
                singleUploadArea.classList.remove('dragover');
            });
            singleUploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                singleUploadArea.classList.remove('dragover');
                if (e.dataTransfer.files.length > 0) {
                    handleSingleFile(e.dataTransfer.files[0]);
                }
            });
            singleFileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleSingleFile(e.target.files[0]);
                }
            });

            // Bulk file upload area
            const bulkUploadArea = document.getElementById('bulkUploadArea');
            const bulkFileInput = document.getElementById('bulkFileInput');

            if (bulkUploadArea) {
                bulkUploadArea.addEventListener('click', () => {
                    if (auth.isPro()) bulkFileInput.click();
                });
                bulkUploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    if (auth.isPro()) bulkUploadArea.classList.add('dragover');
                });
                bulkUploadArea.addEventListener('dragleave', () => {
                    bulkUploadArea.classList.remove('dragover');
                });
                bulkUploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    bulkUploadArea.classList.remove('dragover');
                    handleBulkFiles(e.dataTransfer.files);
                });
                bulkFileInput.addEventListener('change', (e) => {
                    handleBulkFiles(e.target.files);
                });
            }

            // Quality sliders
            document.getElementById('singleImageQuality').addEventListener('input', (e) => {
                document.getElementById('singleQualityValue').textContent = e.target.value + '%';
            });

            document.getElementById('bulkImageQuality').addEventListener('input', (e) => {
                document.getElementById('bulkQualityValue').textContent = e.target.value + '%';
            });

            // Server processing checkbox
            document.getElementById('useServerProcessing').addEventListener('change', (e) => {
                const info = document.getElementById('serverProcessingInfo');
                if (e.target.checked && !auth.isPro()) {
                    e.target.checked = false;
                    showNotification('Server processing requires Pro subscription', 'error');
                } else {
                    info.classList.toggle('show', e.target.checked);
                }
            });

            // Auth form
            document.getElementById('authForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = document.getElementById('authEmail').value;
                const password = document.getElementById('authPassword').value;
                const name = document.getElementById('authName').value;
                const isLogin = document.getElementById('authModalTitle').textContent === 'Sign In';

                try {
                    if (isLogin) {
                        await auth.login(email, password);
                        showNotification('Successfully signed in!', 'success');
                    } else {
                        await auth.register(email, password, name);
                        showNotification('Account created successfully!', 'success');
                    }
                    hideAuthModal();
                } catch (error) {
                    showNotification(error.message, 'error');
                }
            });

            // Compression buttons
            document.getElementById('singleCompressBtn').addEventListener('click', async () => {
                if (!appState.singleFile) return;

                const options = {
                    compressionLevel: document.getElementById('singleCompressionLevel').value,
                    imageQuality: parseInt(document.getElementById('singleImageQuality').value),
                    useServer: document.getElementById('useServerProcessing').checked
                };

                try {
                    appState.isProcessing = true;
                    document.getElementById('singleCompressBtn').disabled = true;
                    document.getElementById('singleCompressBtn').classList.add('processing');

                    const result = await compressor.compressSingle(appState.singleFile, options);

                    // Store compressed blob
                    appState.compressedBlob = result.blob;

                    // Calculate and display results
                    const reductionPercent = ((result.originalSize - result.compressedSize) / result.originalSize * 100).toFixed(1);

                    document.getElementById('singleOriginalSize').textContent = formatFileSize(result.originalSize);
                    document.getElementById('singleCompressedSize').textContent = formatFileSize(result.compressedSize);
                    document.getElementById('singleReductionPercent').textContent = `${reductionPercent}%`;
                    document.getElementById('singleProcessingTime').textContent = `${result.processingTime.toFixed(1)}s`;

                    // Show results
                    document.getElementById('singleResults').style.display = 'block';

                    showNotification('PDF compressed successfully!', 'success');

                } catch (error) {
                    showNotification(error.message, 'error');
                } finally {
                    appState.isProcessing = false;
                    document.getElementById('singleCompressBtn').disabled = false;
                    document.getElementById('singleCompressBtn').classList.remove('processing');
                }
            });

            // Download button
            document.getElementById('singleDownloadBtn').addEventListener('click', () => {
                if (appState.compressedBlob) {
                    const url = URL.createObjectURL(appState.compressedBlob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `compressed_${appState.singleFile.name}`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    setTimeout(() => URL.revokeObjectURL(url), 100);
                }
            });

            // New file button
            document.getElementById('singleNewFileBtn').addEventListener('click', () => {
                resetUI();
            });

            // Bulk compression button
            document.getElementById('bulkCompressBtn').addEventListener('click', async () => {
                if (appState.bulkFiles.length === 0) return;

                const options = {
                    compressionLevel: document.getElementById('bulkCompressionLevel').value,
                    imageQuality: parseInt(document.getElementById('bulkImageQuality').value)
                };

                try {
                    appState.isProcessing = true;
                    document.getElementById('bulkCompressBtn').disabled = true;
                    document.getElementById('bulkCompressBtn').classList.add('processing');

                    const result = await compressor.compressBulk(appState.bulkFiles, options);

                    // Store compressed files
                    appState.bulkCompressedFiles = result.files;

                    // Calculate and display results
                    const totalOriginalSize = result.files.reduce((sum, file) => sum + file.originalSize, 0);
                    const totalCompressedSize = result.files.reduce((sum, file) => sum + file.compressedSize, 0);
                    const totalSavings = totalOriginalSize - totalCompressedSize;
                    const averageReduction = ((totalSavings / totalOriginalSize) * 100).toFixed(1);

                    document.getElementById('bulkTotalFiles').textContent = result.files.length;
                    document.getElementById('bulkTotalSavings').textContent = formatFileSize(totalSavings);
                    document.getElementById('bulkAverageReduction').textContent = `${averageReduction}%`;
                    document.getElementById('bulkTotalTime').textContent = `${result.totalProcessingTime.toFixed(1)}s`;

                    // Show results
                    document.getElementById('bulkResults').style.display = 'block';

                    showNotification(`Compressed ${result.files.length} files successfully!`, 'success');

                } catch (error) {
                    showNotification(error.message, 'error');
                } finally {
                    appState.isProcessing = false;
                    document.getElementById('bulkCompressBtn').disabled = false;
                    document.getElementById('bulkCompressBtn').classList.remove('processing');
                }
            });

            // Bulk download button
            document.getElementById('bulkDownloadBtn').addEventListener('click', async () => {
                if (appState.bulkCompressedFiles.length === 0) return;

                try {
                    showNotification('Preparing download...', 'info');

                    // In a real implementation, this would download a ZIP from the server
                    // For demo purposes, we'll download files individually
                    for (const file of appState.bulkCompressedFiles) {
                        const url = URL.createObjectURL(file.blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `compressed_${file.originalName}`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        setTimeout(() => URL.revokeObjectURL(url), 100);

                        // Small delay between downloads
                        await new Promise(resolve => setTimeout(resolve, 100));
                    }

                    showNotification('Downloads started!', 'success');
                } catch (error) {
                    showNotification('Error preparing download', 'error');
                }
            });

            // New batch button
            document.getElementById('bulkNewBatchBtn').addEventListener('click', () => {
                resetUI();
            });

            // Close modals when clicking outside
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal-overlay')) {
                    hideAuthModal();
                }
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.user-menu')) {
                    document.getElementById('userDropdown').classList.remove('show');
                }
            });

            // Handle keyboard events
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    hideAuthModal();
                    document.getElementById('userDropdown').classList.remove('show');
                }
            });
        });

        // Backend API Integration
        class BackendAPI {
            constructor() {
                this.baseURL = 'https://api.pdfsmaller.site';
                this.token = localStorage.getItem('pdfsmaller_token');
            }

            setToken(token) {
                this.token = token;
                localStorage.setItem('pdfsmaller_token', token);
            }

            async request(endpoint, options = {}) {
                const url = `${this.baseURL}${endpoint}`;
                const headers = {
                    'Content-Type': 'application/json',
                    ...options.headers
                };

                if (this.token) {
                    headers['Authorization'] = `Bearer ${this.token}`;
                }

                try {
                    const response = await fetch(url, {
                        ...options,
                        headers
                    });

                    if (!response.ok) {
                        const error = await response.json();
                        throw new Error(error.message || 'API request failed');
                    }

                    return await response.json();
                } catch (error) {
                    console.error('API request failed:', error);
                    throw error;
                }
            }

            // Authentication endpoints
            async login(email, password) {
                const response = await this.request('/api/auth/login', {
                    method: 'POST',
                    body: JSON.stringify({ email, password })
                });

                if (response.token) {
                    this.setToken(response.token);
                }

                return response;
            }

            async register(name, email, password) {
                const response = await this.request('/api/auth/register', {
                    method: 'POST',
                    body: JSON.stringify({ name, email, password })
                });

                if (response.token) {
                    this.setToken(response.token);
                }

                return response;
            }

            async getProfile() {
                return await this.request('/api/auth/profile');
            }

            // Compression endpoints
            async compressSingle(file, options) {
                const formData = new FormData();
                formData.append('file', file);
                formData.append('compressionLevel', options.compressionLevel);
                formData.append('imageQuality', options.imageQuality);

                const response = await fetch(`${this.baseURL}/api/compress/single`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${this.token}`
                    },
                    body: formData
                });

                if (!response.ok) {
                    throw new Error('Compression failed');
                }

                return await response.blob();
            }

            async compressBulk(files, options) {
                const formData = new FormData();

                files.forEach((file, index) => {
                    formData.append(`file${index}`, file);
                });

                formData.append('compressionLevel', options.compressionLevel);
                formData.append('imageQuality', options.imageQuality);

                const response = await fetch(`${this.baseURL}/api/compress/bulk`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${this.token}`
                    },
                    body: formData
                });

                if (!response.ok) {
                    throw new Error('Bulk compression failed');
                }

                return await response.blob();
            }

            // Payment endpoints
            async createSubscription(plan, paymentMethod) {
                return await this.request('/api/payment/subscribe', {
                    method: 'POST',
                    body: JSON.stringify({ plan, paymentMethod })
                });
            }

            async getSubscription() {
                return await this.request('/api/payment/subscription');
            }

            async cancelSubscription() {
                return await this.request('/api/payment/cancel', {
                    method: 'POST'
                });
            }
        }


        // Update the BackendAPI class with subscription methods
        BackendAPI.prototype.createSubscription = async function (planId, paymentMethodId) {
            return await this.request('/api/subscriptions/create', {
                method: 'POST',
                body: JSON.stringify({ planId, paymentMethodId })
            });
        };

        BackendAPI.prototype.cancelSubscription = async function () {
            return await this.request('/api/subscriptions/cancel', {
                method: 'POST'
            });
        };

        BackendAPI.prototype.getSubscription = async function () {
            return await this.request('/api/subscriptions');
        };

        // Initialize backend API
        const backendAPI = new BackendAPI();


        // Update AuthenticationManager to use real backend
        AuthenticationManager.prototype.login = async function (email, password) {
            try {
                const response = await backendAPI.login(email, password);
                const user = {
                    id: response.user.id,
                    name: response.user.name,
                    email: response.user.email,
                    plan: response.user.plan
                };
                this.setUser(user);
                return user;
            } catch (error) {
                throw new Error(error.message || 'Login failed');
            }
        };

        AuthenticationManager.prototype.register = async function (email, password, name) {
            try {
                const response = await backendAPI.register(name, email, password);
                const user = {
                    id: response.user.id,
                    name: response.user.name,
                    email: response.user.email,
                    plan: response.user.plan
                };
                this.setUser(user);
                return user;
            } catch (error) {
                throw new Error(error.message || 'Registration failed');
            }
        };

        // Update AuthenticationManager to handle plan information
        AuthenticationManager.prototype.updateUI = function () {
            const guestActions = document.getElementById('guestActions');
            const userActions = document.getElementById('userActions');
            const bulkUpgradePrompt = document.getElementById('bulkUpgradePrompt');
            const bulkProcessingArea = document.getElementById('bulkProcessingArea');
            const useServerCheckbox = document.getElementById('useServerProcessing');

            // Navigation menu auth sections
            const guestAuthSection = document.getElementById('guestAuthSection');
            const userAuthSection = document.getElementById('userAuthSection');

            if (this.appState.user) {
                // Update header user dropdown
                guestActions.classList.add('hidden');
                userActions.classList.remove('hidden');

                document.getElementById('userInitials').textContent =
                    this.appState.user.name.charAt(0).toUpperCase();
                document.getElementById('userName').textContent = this.appState.user.name;
                document.getElementById('userPlan').textContent = this.appState.user.plan;

                // Update navigation menu auth sections
                if (guestAuthSection && userAuthSection) {
                    guestAuthSection.style.display = 'none';
                    userAuthSection.classList.remove('hidden');
                    userAuthSection.style.display = 'block';

                    // Update navigation menu user info
                    const userInitialsNav = document.getElementById('userInitialsNav');
                    const userNameNav = document.getElementById('userNameNav');
                    const userPlanNav = document.getElementById('userPlanNav');

                    if (userInitialsNav) {
                        userInitialsNav.textContent = this.appState.user.name.charAt(0).toUpperCase();
                    }
                    if (userNameNav) {
                        userNameNav.textContent = this.appState.user.name;
                    }
                    if (userPlanNav) {
                        const planText = this.appState.user.plan.includes('Pro') ? 'Pro Plan' : 'Free Plan';
                        userPlanNav.textContent = planText;

                        if (this.appState.user.plan.includes('Pro')) {
                            userPlanNav.innerHTML = `${planText} <span class="plan-badge">Pro</span>`;
                        }
                    }
                }

                // Update navigation menu authentication state
                if (window.navigationMenu) {
                    window.navigationMenu.updateAuthenticationState(this.appState.user);
                }

                // Enable/disable features based on plan
                if (this.appState.user.plan.includes('Pro')) {
                    bulkUpgradePrompt.classList.add('hidden');
                    bulkProcessingArea.classList.remove('hidden');
                    useServerCheckbox.disabled = false;
                } else {
                    bulkUpgradePrompt.classList.remove('hidden');
                    bulkProcessingArea.classList.add('hidden');
                    useServerCheckbox.disabled = true;
                }

                // Update pricing UI if on pricing tab
                if (appState.currentTab === 'pricing') {
                    showPricingModal();
                }
            } else {
                // Update header user dropdown
                guestActions.classList.remove('hidden');
                userActions.classList.add('hidden');

                // Update navigation menu auth sections
                if (guestAuthSection && userAuthSection) {
                    guestAuthSection.style.display = 'block';
                    userAuthSection.classList.add('hidden');
                    userAuthSection.style.display = 'none';
                }

                // Update navigation menu authentication state
                if (window.navigationMenu) {
                    window.navigationMenu.updateAuthenticationState(null);
                }

                bulkUpgradePrompt.classList.remove('hidden');
                bulkProcessingArea.classList.add('hidden');
                useServerCheckbox.disabled = true;

                // Update pricing UI if on pricing tab
                if (appState.currentTab === 'pricing') {
                    showPricingModal();
                }
            }
        };

        // Update PDFCompressor to use real backend
        PDFCompressor.prototype.compressOnServer = async function (file, options) {
            return await backendAPI.compressSingle(file, options);
        };

        PDFCompressor.prototype.compressBulk = async function (files, options) {
            const blob = await backendAPI.compressBulk(files, options);

            // In a real implementation, the server would return a ZIP file
            // For now, we'll return individual file results
            return {
                files: files.map(file => ({
                    originalName: file.name,
                    originalSize: file.size,
                    compressedSize: Math.floor(file.size * 0.6), // Simulate 40% reduction
                    blob: file // In real implementation, this would be the compressed file
                })),
                totalProcessingTime: files.length * 2 // Simulate processing time
            };
        };

        // Add payment functionality
        async function upgradeToPro() {
            if (!appState.user) {
                showAuthModal('register');
                return;
            }

            try {
                showNotification('Redirecting to payment...', 'info');

                // In a real implementation, this would integrate with Stripe or similar
                // For demo purposes, we'll simulate successful payment
                setTimeout(() => {
                    appState.user.plan = 'Pro';
                    localStorage.setItem('pdfsmaller_user', JSON.stringify(appState.user));
                    auth.updateUI();

                    // Update navigation menu plan info
                    if (window.navigationMenu) {
                        window.navigationMenu.updateUserPlan(appState.user);
                    }

                    showNotification('Successfully upgraded to Pro!', 'success');
                }, 2000);
            } catch (error) {
                showNotification('Payment failed: ' + error.message, 'error');
            }
        }

        // Add service worker for offline functionality (if needed)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').catch(error => {
                    console.log('ServiceWorker registration failed:', error);
                });
            });
        }

        // Navigation Menu Functionality - Simplified Version
        class NavigationMenu {
            constructor() {
                this.isOpen = false;
                this.hamburgerButton = document.querySelector('.hamburger-menu');
                this.navMenu = document.querySelector('.nav-menu');
                this.navMenuOverlay = document.querySelector('.nav-menu-overlay');
                this.navMenuLinks = document.querySelectorAll('.nav-menu-link[data-tab]');
                this.authMenuLinks = document.querySelectorAll('.nav-menu-link:not([data-tab])');
                
                this.init();
            }

            init() {
                // Hamburger button click
                if (this.hamburgerButton) {
                    this.hamburgerButton.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.toggleMenu();
                    });
                }

                // Overlay click to close
                if (this.navMenuOverlay) {
                    this.navMenuOverlay.addEventListener('click', () => {
                        this.closeMenu();
                    });
                }

                // Navigation links
                this.navMenuLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        const tabName = link.getAttribute('data-tab');
                        if (tabName) {
                            switchTab(tabName);
                            this.closeMenu();
                            this.updateActiveMenuItem(tabName);
                        }
                    });
                });

                // Auth menu links
                this.authMenuLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        setTimeout(() => {
                            this.closeMenu();
                        }, 100);
                    });
                });

                // Set initial active state
                this.updateActiveMenuItem('single');
            }

            toggleMenu() {
                if (this.isOpen) {
                    this.closeMenu();
                } else {
                    this.openMenu();
                }
            }

            openMenu() {
                this.isOpen = true;
                this.hamburgerButton.classList.add('active');
                this.hamburgerButton.setAttribute('aria-expanded', 'true');
                this.navMenu.classList.add('show');
                this.navMenu.setAttribute('aria-hidden', 'false');
            }

            closeMenu() {
                this.isOpen = false;
                this.hamburgerButton.classList.remove('active');
                this.hamburgerButton.setAttribute('aria-expanded', 'false');
                this.navMenu.classList.remove('show');
                this.navMenu.setAttribute('aria-hidden', 'true');
            }

            updateActiveMenuItem(activeTab) {
                this.navMenuLinks.forEach(link => {
                    link.classList.remove('active');
                });

                const activeLink = document.querySelector(`.nav-menu-link[data-tab="${activeTab}"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                }
            }

            updateAuthenticationState(user) {
                const guestSection = document.getElementById('guestAuthSection');
                const userSection = document.getElementById('userAuthSection');
                const userInfo = document.getElementById('userInfoSection');

                if (user) {
                    if (guestSection) guestSection.style.display = 'none';
                    if (userSection) userSection.style.display = 'block';
                    if (userInfo) {
                        userInfo.style.display = 'flex';
                        const userName = userInfo.querySelector('.user-name');
                        const userPlan = userInfo.querySelector('.user-plan');
                        if (userName) userName.textContent = user.name || user.email;
                        if (userPlan) {
                            userPlan.innerHTML = user.plan === 'pro'
                                ? 'Pro Plan <span class="plan-badge">PRO</span>'
                                : 'Free Plan';
                        }
                    }
                } else {
                    if (guestSection) guestSection.style.display = 'block';
                    if (userSection) userSection.style.display = 'none';
                    if (userInfo) userInfo.style.display = 'none';
                }
            }

            updateUserPlan(user) {
                if (!user) return;
                const userPlan = document.querySelector('.user-info .user-plan');
                if (userPlan) {
                    userPlan.innerHTML = user.plan === 'pro'
                        ? 'Pro Plan <span class="plan-badge">PRO</span>'
                        : 'Free Plan';
                }
            }
        }

        // Initialize navigation menu when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                window.navigationMenu = new NavigationMenu();
            });
        } else {
            window.navigationMenu = new NavigationMenu();
        }

        // Enhanced switchTab function to update navigation menu
        const originalSwitchTab = switchTab;
        switchTab = function (tabName) {
            // Call original switchTab function
            originalSwitchTab(tabName);

            // Update navigation menu active state
            if (navigationMenu) {
                navigationMenu.updateActiveMenuItem(tabName);
            }
        };

        // Export functions for global access
        window.switchTab = switchTab;
        window.showAuthModal = showAuthModal;
        window.hideAuthModal = hideAuthModal;
        window.toggleAuthMode = toggleAuthMode;
        window.toggleUserDropdown = toggleUserDropdown;
        window.logout = logout;
        window.upgradeAccount = upgradeAccount;
        window.removeBulkFile = removeBulkFile;
        window.upgradeToPro = upgradeToPro;
        window.handlePlanSelection = handlePlanSelection;
        window.downgradeToFree = downgradeToFree;

    </script>
</body>

</html>